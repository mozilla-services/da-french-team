<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Service de nuages, ">

        <link rel="alternate"  href="https://mozilla-services.github.io/servicedenuages.fr/feeds/all.atom.xml" type="application/atom+xml" title="Service de nuages Full Atom Feed"/>

        <title>How to use the JavaScript spread operator with Webpack // Service de nuages // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://mozilla-services.github.io/servicedenuages.fr/theme/css/pure.css">
    <link rel="stylesheet" href="https://mozilla-services.github.io/servicedenuages.fr/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <h5>Published</h5>
                <p title="~197 words">~1 minutes reading ðŸ•‘</p>
                <p>Thu, 01 February 2018</p>
                <a href="/en/">&larr; Back to articles</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>How to use the JavaScript spread operator with Webpack</h1>
                        <p class="post-meta">                                <a class="post-category" href="https://mozilla-services.github.io/servicedenuages.fr/tag/mozilla.html">mozilla</a>
                        </p>
                </header>
            </section>
            <div class="section" id="what-is-the-object-rest-spread-operator">
<h2>What is the Object Rest Spread operator?</h2>
<p>One of the cool feature of JavaScript is the <a class="reference external" href="https://github.com/tc39/proposal-object-rest-spread">Object Rest Spread operator</a> feature:</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">preferences</span> <span class="o">=</span> <span class="p">{...</span><span class="nx">defaultPreferences</span><span class="p">,</span> <span class="p">...</span><span class="nx">savedPreferences</span><span class="p">};</span>
</pre></div>
<p>Before this feature you could write it like that:</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">preferences</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">defaultPreferences</span><span class="p">,</span> <span class="nx">savedPreferences</span><span class="p">);</span>
</pre></div>
<p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">Click here for more information</a> about this Object Rest Spread feature.</p>
<p>Because it is still a stage 3 draft feature, webpack doesn't
understand this operator yet and raise a <tt class="docutils literal">Unexpected token</tt> parse
error.</p>
</div>
<div class="section" id="how-to-enable-the-draft-feature-with-webpack">
<h2>How to enable the draft feature with webpack</h2>
<div class="section" id="parse-failed-unexpected-token">
<h3>Parse failed: Unexpected token</h3>
<div class="highlight"><pre><span></span><span class="nx">ERROR</span> <span class="k">in</span> <span class="p">.</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">background</span><span class="o">/</span><span class="nx">storage</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">Module</span> <span class="nx">parse</span> <span class="nx">failed</span><span class="o">:</span> <span class="nx">Unexpected</span> <span class="nx">token</span> <span class="p">(</span><span class="mi">54</span><span class="o">:</span><span class="mi">28</span><span class="p">)</span>
<span class="nx">You</span> <span class="nx">may</span> <span class="nx">need</span> <span class="nx">an</span> <span class="nx">appropriate</span> <span class="nx">loader</span> <span class="nx">to</span> <span class="nx">handle</span> <span class="k">this</span> <span class="nx">file</span> <span class="nx">type</span><span class="p">.</span>
<span class="o">|</span>       <span class="c1">// set preferences defaults if not present</span>
<span class="o">|</span>       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">preferences</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
<span class="o">|</span>         <span class="nx">preferences</span> <span class="o">=</span> <span class="p">{...</span><span class="nx">defaultPreferences</span><span class="p">,</span> <span class="p">...</span><span class="nx">savedPreferences</span><span class="p">};</span>
<span class="o">|</span>       <span class="p">}</span>
 <span class="err">@</span> <span class="p">.</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">background</span><span class="p">.</span><span class="nx">js</span>
</pre></div>
</div>
<div class="section" id="babel-to-the-rescue">
<h3>Babel to the rescue</h3>
<p>The way to use experimental features in Javascript is to use Babel.</p>
<p>Hopefully for use there is a Babel plugin for this feature.</p>
</div>
<div class="section" id="babel-loader-and-babel-plugin-transform-object-rest-spread-to-the-rescue">
<h3><tt class="docutils literal"><span class="pre">babel-loader</span></tt> and <tt class="docutils literal"><span class="pre">babel-plugin-transform-object-rest-spread</span></tt> to the rescue</h3>
<div class="highlight"><pre><span></span><span class="go">npm install --save-dev babel-loader babel-plugin-transform-object-rest-spread</span>
</pre></div>
</div>
<div class="section" id="configure-webpack">
<h3>Configure webpack</h3>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">loaders</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
        <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel-loader'</span><span class="p">,</span>
        <span class="nx">query</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">plugins</span><span class="o">:</span><span class="p">[</span> <span class="s1">'transform-object-rest-spread'</span> <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>This is a simple way to use this experimental feature with webpack.</p>
<p>Note that this will probably soon be unnecessary since webpack is
<a class="reference external" href="https://github.com/webpack/webpack/issues/5548#issuecomment-362059410">implementing its support</a>
as we speak.</p>
</div>

            <div class="hr"></div>
            <a href="#" class="go-top">Revenir au dÃ©but</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "servicedenuages"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div><footer class="footer">
    <p>&copy; Service de nuages &ndash;
        DÃ©veloppÃ© avec <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        et <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.notmyidea.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.notmyidea.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->
  <script src="https://mozilla-services.github.io/servicedenuages.fr/theme/js/instantclick.min.js" data-no-instant></script>
  <script data-no-instant>InstantClick.init();</script>
</body>
</html>